# deconz

![Version: 0.1.0](https://img.shields.io/badge/Version-0.1.0-informational?style=flat-square) ![AppVersion: 2.29.2](https://img.shields.io/badge/AppVersion-2.29.2-informational?style=flat-square)

A Helm chart to deploy deCONZ with USB passthrough and optional Gateway/Ingress support

**Homepage:** <https://github.com/janip81/helm-charts/tree/main/charts/deconz>

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| Jani Pesonen | <jani@techmonkeys.se> | <https://github.com/janip81> |

## Source Code

* <https://github.com/janip81/helm-charts/tree/main/charts/deconz/>

# Overview
Helm-chart for deploying [deCONZ](https://github.com/dresden-elektronik/deconz-rest-plugin), the REST API bridge for Zigbee devices.

This chart supports USB passthrough via `hostPath`, VNC support, persistent configuration storage, and optional ingress/gateway exposure.

## Adding this helm repository

To add the helm repository, run the following commands:

```bash
helm repo add janip81 https://janip81.github.io/helm-charts/
helm search repo deconz
```

`values.yaml` files for the charts can be found in the `charts/[chartname]` directories.

## TL;DR

```bash
helm repo add janip81 https://janip81.github.io/helm-charts/
helm install my-zigbee-gateway janip81/deconz -f YOUR-VALUES.yaml
```

[Helm](https://helm.sh) must be installed to use the charts.  Please refer to
Helm's [documentation](https://helm.sh/docs) to get started.

If you had already added this repo earlier, run `helm repo update` to retrieve
the latest versions of the packages.  You can then run `helm search repo deconz` to see the chart.

To install the deCONZ chart:

    helm install my-deconz janip81/deconz

To uninstall the chart:

    helm delete my-deconz

## Prerequisites

- [Kubernetes](https://kubernetes.io/)
- [Helm 3.1.0+](https://helm.sh)
- PV provisioner support in the underlying infrastructure (for persistent storage)
- USB device on the node (e.g. Conbee) accessible via `hostPath`
- LoadBalancer or Ingress controller for external access
- (Optional) Gateway API support for Cilium/NGINX Gateway

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| conbee.devicePath | string | `"/dev/serial/by-id/usb-FTDI_FT230X_Basic_UART_DM01H1HD-if00-port0"` |  |
| env.TZ | string | `"UTC"` |  |
| env.VERBOSE | string | `"1"` |  |
| env.VNC_MODE | string | `"1"` |  |
| env.VNC_PORT | string | `"5900"` |  |
| env.WEB_PORT | string | `"80"` |  |
| env.WS_PORT | string | `"443"` |  |
| env.timezone | string | `"Europe/Stockholm"` |  |
| gateway.enabled | bool | `false` |  |
| gateway.hostname | string | `"deconz.domain.com"` |  |
| gateway.name | string | `"internal-shared"` |  |
| gateway.namespace | string | `"cilium"` |  |
| image.repository | string | `"deconzcommunity/deconz"` |  |
| image.tag | string | `"2.29.2"` |  |
| ingress.annotations | object | `{}` |  |
| ingress.className | string | `""` |  |
| ingress.enabled | bool | `false` |  |
| ingress.hosts[0].host | string | `"deconz.example.com"` |  |
| ingress.hosts[0].paths[0].path | string | `"/"` |  |
| ingress.hosts[0].paths[0].pathType | string | `"Prefix"` |  |
| ingress.tls[0].hosts[0] | string | `"deconz.example.com"` |  |
| ingress.tls[0].secretName | string | `"deconz-tls"` |  |
| nodeSelector.usb | string | `"zigbee"` |  |
| pvc.name | string | `"deconz-config"` |  |
| pvc.size | string | `"2560Mi"` |  |
| pvc.storageClassName | string | `"vsphere-csi"` |  |
| securityContext.privileged | bool | `true` |  |
| service.ports[0].name | string | `"http"` |  |
| service.ports[0].port | int | `80` |  |
| service.ports[0].targetPort | string | `"http"` |  |
| service.ports[1].name | string | `"websocket"` |  |
| service.ports[1].port | int | `443` |  |
| service.ports[1].targetPort | string | `"websocket"` |  |
| service.ports[2].name | string | `"vnc"` |  |
| service.ports[2].port | int | `5900` |  |
| service.ports[2].targetPort | string | `"vnc"` |  |
| service.type | string | `"ClusterIP"` |  |
| serviceAccountName | string | `"deconz"` |  |
| vnc.create | bool | `true` |  |
| vnc.password | string | `"changeme"` |  |
| vnc.secretName | string | `"deconz-vnc-password"` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
